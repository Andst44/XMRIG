FROM ubuntu
CMD ["/bin/sh"]
RUN adduser --system --disabled-password --no-create-home --home /xmrig mining
RUN apt-get upgrade && apt-get update && apt-get install git build-essential cmake libuv1-dev libssl-dev libhwloc-dev -y && git clone https://github.com/xmrig/xmrig.git && mkdir xmrig/build && cd xmrig/build && cmake .. && make -j$(nproc)
USER [mining]
WORKDIR /xmrig
ENTRYPOINT ["./xmrig"]
